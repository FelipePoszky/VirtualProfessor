<ConfigScreen>: #:kivy!
    

    MDBoxLayout:

        orientation: "vertical"
        md_bg_color: app.theme_cls.bg_normal
        

        MDTopAppBar:
            id: logoToolBar
            font_size: dp(20)
            type_height: "small"
            title: "VirtualProf"
            anchor_title: "left"
            right_action_items: [["dots-vertical", lambda button: app.dropdown(button)]]

        MDBoxLayout:
            orientation: "vertical"
            md_bg_color: app.theme_cls.primary_color
            adaptive_height: True

            MDBoxLayout:
                orientation: "vertical"
                md_bg_color: app.theme_cls.bg_normal
                size_hint_y: None
                radius: [20, 20, 0, 0]
                padding: [0, 5, 0, 5]  
                height: userData.height + quizData.height + dp(10)
                spacing: dp(5)

                MDBoxLayout:
                    id: userData
                    orientation: "vertical"
                    ripple_behavior: True
                    md_bg_color: 0, 0, 0, 0
                    elevation: 0
                    size_hint_y: None
                    padding: [10, 10, 10, 0]
                    spacing: dp(10)
                    height: userCard.height + dp(5)
                
                    MDCard:
                        id: userCard
                        ripple_behavior: True
                        md_bg_color: 0, 0, 0, 0
                        elevation: 0
                        size_hint_y: None
                        padding: [10, 10, 10, 5]
                        spacing: dp(10)
                        height: Avatar.height + dp(10)
                        Avatar:
                            id: Avatar
                            source: root.imagen
                            pos_hint: {"center_y": .5}
                            radius: [30, ]
                        MDBoxLayout:
                            orientation: "vertical"
                            padding: [0, 0, 0, 10]
                            spacing: 2
                            Label:
                                id: userName
                                text: root.username
                                theme_text_color: "Custom"
                                size: self.texture_size
                                size_hint: None, None
                                font_size: sp(15)
                                color: app.theme_cls.opposite_bg_normal
                                bold: True
                            MDLabel:
                                id: tokens
                                text: "Quiz Realizados: 2/2"
                                height: self.texture_size[1]
                                theme_text_color: "Custom"
                                size_hint_y: None
                                bold: True
                                font_size: sp(13)
                                color: [.5, .5, .5, 1]
                                shorten: True
                                shorten_font: "right"
                        BoxLayout:
                            orientation: "vertical"
                            width: quizes.width
                            size_hint_x: None
                            pos_hint: {"center_y": .5}
                            spacing: dp(2)
                            padding: [0, 15, 0, 5]
                            Label:
                                id: quizes
                                text: 'Tokens: 1030/5000'
                                size: self.texture_size
                                size_hint: None, None
                                font_size: sp(9)
                                color: app.theme_cls.opposite_bg_normal


                MDBoxLayout:
                    id: quizData
                    orientation: "vertical"
                    md_bg_color: (0.1, 0.1, 0.1, 1)
                    padding: [10, 5, 10, 5]
                    size_hint_y: None
                    height: titulo.height + lista.height + dp(20)
                    #radius: [5, 5, 5, 5]
                    spacing: dp(10)
                    Label:
                        id: titulo
                        text: "User Score"
                        font_size: sp(17)
                        bold: True
                        color: app.theme_cls.opposite_bg_normal
                        size_hint_y: None
                        height: self.texture_size[1]

                    MDBoxLayout:
                        id: lista
                        orientation: "horizontal"
                        size_hint_y: None
                        height: tablaChat.height + dp(10)
                        padding: [5, 10, 5, 10]
                        spacing: dp(10)
                        Label:
                            id: tablaChat
                            text: "Chat"
                            pos_hint: {'center_x': .1, 'center_y': .5}
                            padding: [1, 1, 100, 1]
                            height: self.texture_size[1]
                        Label:
                            text: "Score"
                            pos_hint: {'center_x': .9, 'center_y': .5}
                            padding: [100, 1, 1, 1]
                            height: self.texture_size[1]

        MDBoxLayout:
            orientation: "vertical"
            
            ScrollView:
                do_scroll_y: True
                effect_cls: "ScrollEffect"
                bar_width: 0
                MDList:
                    id: scoreList
                    spacing: dp(5)
        

        MDBoxLayout:
            orientation: "horizontal"
            spacing: 10
            padding: 10
            md_bg_color: app.theme_cls.primary_color
            size_hint_y: None
            height: dp(48)

            MDBoxLayout:
                orientation: 'vertical'
                padding: [0, 10, 0, 10]
                size_hint_y: None
                height: dp(48)
                pos_hint: {'center_x': .5, 'center_y': .49}

                MDIconButton:
                    id: chatButton
                    icon: 'chat'
                    pos_hint: {'center_x': .5}
                    on_press: app.change_screen('message')
                    user_font_size: '14sp'
                    theme_text_color: "Custom"
                    
                Label:
                    text: 'Chat'
                    font_size: dp(14)

            MDBoxLayout:
                orientation: 'vertical'
                padding: [0, 10, 0, 10]
                size_hint_y: None
                height: dp(48)
                pos_hint: {'center_x': .5, 'center_y': .49}

                MDIconButton:
                    id: quizButton
                    icon: 'comment-question'        
                    pos_hint: {'center_x': .5}
                    on_press: 
                        app.change_screen('quiz-screen')
                        app.filter_builder()
                        app.quizlist_builder('Todos')
                    user_font_size: '14sp'
                    theme_text_color: "Custom"

                Label:
                    text: 'Quiz'
                    font_size: dp(14)

            MDBoxLayout:
                orientation: 'vertical'
                padding: [0, 10, 0, 10]
                size_hint_y: None
                height: dp(48)
                pos_hint: {'center_x': .5, 'center_y': .49}

                MDIconButton:
                    id: configButton
                    icon: 'account-circle'
                    pos_hint: {'center_x': .5}
                
                    text_color: app.theme_cls.primary_color if app.change_screen == 'config-screen' else 0,130,44,1
                    user_font_size: '14sp'
                    theme_text_color: "Custom"
                Label:
                    text: 'Perfil'
                    font_size: dp(14)